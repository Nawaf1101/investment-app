/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const j=require("react"),w=require("@progress/kendo-charts"),D=require("./theme-service.js"),h=require("@progress/kendo-react-common"),M=require("../package-metadata.js"),x=require("./propTypes.js"),p=require("./SankeyTooltip.js");function H(n){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const o in n)if(o!=="default"){const r=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(a,o,r.get?r:{enumerable:!0,get:()=>n[o]})}}return a.default=n,Object.freeze(a)}const t=H(j),P=12,f={offset:P,visible:!0},_=["nodeEnter","nodeLeave","linkEnter","linkLeave","nodeClick","linkClick"],I=(n,a)=>{n&&(n.unbind(),_.forEach(o=>{a[o]&&n.bind(o,a[o])}))},k=t.forwardRef((n,a)=>{h.validatePackage(M.packageMetadata);const o=t.useRef(null),r=t.useRef(null),u=t.useRef(null),{data:y,links:m,nodes:b,labels:g,title:v,legend:C,tooltip:s=f,disableAutoLayout:E}=n,T=t.useRef();T.current=n;const[S,L]=t.useState(null),R=t.useCallback(l=>{const{visible:i,offset:e=P,nodeComponent:d=p.NodeTooltipContent,linkComponent:q=p.LinkTooltipContent}={...f,...s};if(i){const N={event:l,offset:e,Content:l.targetType==="node"?d:q};L(N)}},[s]),O=t.useCallback(()=>{L(null)},[]),c=t.useCallback((l,i)=>{const e=T.current[l];if(e){const d={...i,nativeEvent:i.originalEvent,target:u.current};e.call(void 0,d)}},[]);return t.useEffect(()=>{const l={data:y,links:m,nodes:b,labels:g,title:v,legend:C,disableAutoLayout:E,tooltip:{...f,...s}};return r.current?r.current.setOptions(l):h.canUseDOM&&o.current&&D.loadTheme(o.current.ownerDocument,i=>{r.current=new w.Sankey(o.current,l,i),I(r.current,{nodeEnter:e=>{c("onNodeEnter",e)},nodeLeave:e=>{c("onNodeLeave",e)},linkEnter:e=>{c("onLinkEnter",e)},linkLeave:e=>{c("onLinkLeave",e)},nodeClick:e=>{c("onNodeClick",e)},linkClick:e=>{c("onLinkClick",e)}}),r.current.bind("tooltipShow",R),r.current.bind("tooltipHide",O)}),()=>{r.current&&(r.current.destroy(),r.current=null)}},[y,m,b,g,v,C,E,s,O,R,c]),t.useImperativeHandle(u,()=>({get element(){return o.current},exportVisual:l=>r.current.exportVisual(l),props:n}),[]),t.useImperativeHandle(a,()=>u.current),t.createElement(t.Fragment,null,t.createElement("div",{ref:o,className:n.className,style:n.style}),S&&t.createElement(p.TooltipComponent,{...S}))});k.propTypes=x.sankeyPropTypes;k.displayName="KendoReactSankey";exports.Sankey=k;
